<template>
  <form-create-mobile
    driver="elm"
    v-model="formData"
    v-model:api="fapi"
    :rule="rule"
    :option="option"
    @submit="onSubmit"
  ></form-create-mobile>
</template>

<script setup>
import {ref} from "vue";
import formCreateMobile from "@form-create/vant";

const option = ref(formCreate.parseJson('{"form":{"inline":false,"hideRequiredAsterisk":false,"labelPosition":"right","size":"default","labelWidth":"125px"},"globalEvent":{"event_Feq4lui56zxbabc":{"label":"自定义","deletable":false,"handle":"[[FORM-CREATE-PREFIX-function handle($inject){aaa;}-FORM-CREATE-SUFFIX]]"},"event_Feq4lui56zxbab2c":{"label":"自定义2","handle":"[[FORM-CREATE-PREFIX-function(t){console.log(t)}-FORM-CREATE-SUFFIX]]"}},"globalData":{"data_Fk6dlui4k0xuabc":{"label":"自定义数据","type":"static","data":[1,2,3,4]},"data_Fs1elui4kttlacc":{"action":"http://192.168.1.4:8081/","deletable":false,"method":"GET","headers":{},"data":{},"parse":"[[FORM-CREATE-PREFIX-function parse(res){return res.data;}-FORM-CREATE-SUFFIX]]","onError":"[[FORM-CREATE-PREFIX-function onError(e){}-FORM-CREATE-SUFFIX]]","label":"自定义接口数据","type":"fetch"}},"resetBtn":{"show":false,"innerText":"重置"},"submitBtn":{"show":true,"innerText":"提交"},"globalVariable":{"var_Fppdlz6gytmzb1c":{"label":"token","deletable":false,"handle":"[[FORM-CREATE-PREFIX-function(t,r){return t(\\"$cookie.token\\")||\\"default Token\\"}-FORM-CREATE-SUFFIX]]"}},"globalClass":{"cls_Fzmulzw3u0oib0c":{"label":"fff","deletable":false,"style":{"color":"red"}}}}'));
const rule = ref(formCreate.parseJson('[{"type":"dataTable","native":true,"props":{"height":"500px","button":{},"data":[{"date":"2016-05-12","name":"Tom 10","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 11","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 12","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 13","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 14","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 15","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 16","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 17","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 18","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 19","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 20","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 21","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 22","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 23","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 24","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 25","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 26","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 27","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 28","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 29","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 30","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 31","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 32","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 33","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 34","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 35","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 36","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 37","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 38","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"},{"date":"2016-05-12","name":"Tom 39","state":"California","city":"Los Angeles","address":"No. 189, Grove St, Los Angeles","zip":"CA 90036"}],"column":[{"format":"default","prop":"date","label":"Date","width":"150"},{"format":"default","prop":"name","label":"Name","width":"120"},{"format":"default","prop":"state","label":"State","width":"120"},{"format":"default","prop":"city","label":"City","width":"320"},{"format":"default","prop":"address","label":"Address","width":"600"},{"format":"default","prop":"zip","label":"Zip","width":"120"}]},"_fc_id":"id_Fneamfkqhutqabc","name":"ref_Frtdmfkqhutqacc","display":true,"hidden":false,"_fc_drag_tag":"dataTable"},{"type":"input","field":"Fianmfkuxo49adc","title":"测试111","$required":false,"props":{"type":"textarea"},"_fc_id":"id_Fx11mfkuxo49aec","name":"ref_Fx3pmfkuxo49afc","display":true,"hidden":false,"_fc_drag_tag":"textarea"},{"type":"datePicker","field":"F8ilmfkvuw16anc","title":"日期","$required":false,"_fc_id":"id_Fvvumfkvuw16aoc","name":"ref_Fbpamfkvuw16apc","display":true,"hidden":false,"_fc_drag_tag":"datePicker"}]'));

option.value.preview = true
const fapi = ref(null);
const formData = ref({});

const onSubmit =  (formData) => {
  //todo 提交表单
}
</script>